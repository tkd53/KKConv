#=====================================================================================
#                       InfinitVoc.csh
#                             bShinsuke Mori
#                             Last change 24 May 2009
#=====================================================================================

# 機  能 : 無限語彙の仮名漢字変換の実験
#
# 使用法 : InfinitVoc.csh (PATH)
#
# 実  例 : InfinitVoc.csh "../../Word-2/ME-i-Step0"
#
# 注意点 : テストコーパスに出現し、確率的単語分割コーパスに出現する文字列に変換される
#          片仮名列のみから辞書を作る


#-------------------------------------------------------------------------------------
#                        check arguments
#-------------------------------------------------------------------------------------

if ($#argv != 1) then
    echo "Usage: $0 (PATH)"
    exit(1)
endif


#-------------------------------------------------------------------------------------
#                        setvariables
#-------------------------------------------------------------------------------------

set PATH = $argv[1]

set L = $PATH/L
set T = $HOME/SLM/nlp-CWJ/MMN-corpus/T.yomi


#-------------------------------------------------------------------------------------
#                        Directory の作成
#-------------------------------------------------------------------------------------

/bin/mkdir -p $PATH:t

cd $PATH:t
set PATH = ../$PATH

ln -s $T
set T = $T:t:r

echo $PATH


#-------------------------------------------------------------------------------------
#                        言語モデルへのリンク
#-------------------------------------------------------------------------------------

#foreach FILE ( $PATH/Char* $PATH/Word* $PATH/$L.* )
#    /bin/ln -s "$FILE"
#end


#-------------------------------------------------------------------------------------
#                        ベースの仮名漢字変換情報へのリンク
#-------------------------------------------------------------------------------------

#foreach FILE ( ../Step0/InDict* ../Step0/ExDict* Yomi* )
#    /bin/ln -s "$FILE"
#end
#exit


#-------------------------------------------------------------------------------------
#                        $T.yomi の n-gram を作る
#-------------------------------------------------------------------------------------

/bin/mkdir -p yomi
cd yomi

/bin/ln -s $PATH/$T.yomi $T-yomi.text

$HOME/link/resource/tool/StochSegCorpus/src/main $T-yomi

$HOME/SLM/text/bin/N-gram.csh $T-yomi
exit


#-------------------------------------------------------------------------------------
#                        可能な変換を出力
#-------------------------------------------------------------------------------------

foreach N (`seq -w 1 16`)
    echo $N
    ../../bin/WordYomiProb.perl $PATH/$L < $N-gram > $T.charyomi.$N-gram
end


#-------------------------------------------------------------------------------------
#                        無限語彙を模倣する辞書を作る
#-------------------------------------------------------------------------------------

#cd ..
#../bin/MakeIVDictDA.perl yomi/$T.charyomi.??-gram >& MakeIVDictDA.log


#-------------------------------------------------------------------------------------
#                        close
#-------------------------------------------------------------------------------------

echo Done $0
exit


#=====================================================================================
#                        END
#=====================================================================================
