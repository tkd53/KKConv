#!/bin/csh -f
#=====================================================================================
#                       WithTask.csh
#                           by Shinsuke Mori
#                           Last change : 12 August 2009
#=====================================================================================

# 機  能 : 疑似確率的単語分割による仮名漢字変換の実験用スクリプト
#
# 使用法 : WithTask.csh (PATH)
#
# 実  例 : WithTask.csh "../../Word-2/0PSSC-Step0"
#
# 注意点 : なし


#-------------------------------------------------------------------------------------
#                        check arguments
#-------------------------------------------------------------------------------------

if ($#argv != 1) then
    echo "Usage: $0 (PATH)"
    exit(1)
endif


#-------------------------------------------------------------------------------------
#                        setvariables
#-------------------------------------------------------------------------------------

set PATH = $argv[1]


#-------------------------------------------------------------------------------------
#                        Directory の作成
#-------------------------------------------------------------------------------------

/bin/mkdir -p $PATH:t

echo cd $PATH:t

cd $PATH:t

set PATH = ../$PATH


#-------------------------------------------------------------------------------------
#                        言語モデルへのリンク
#-------------------------------------------------------------------------------------

foreach FILE ( $PATH/Char* $PATH/Word* $PATH/Task* $PATH/WithTaskLambda )
    /bin/ln -s "$FILE"
end


#-------------------------------------------------------------------------------------
#                        ベースの仮名漢字変換情報へのリンク
#-------------------------------------------------------------------------------------

foreach FILE ( ../Step0/InDict* ../Step0/ExDict* ../Step0/KKCI* )
    /bin/ln -s "$FILE"
end


#-------------------------------------------------------------------------------------
#                        無限語彙の仮名漢字変換へのリンク
#-------------------------------------------------------------------------------------

exit

#set INFV = ../ME-i-Step0
#foreach FILE ( $INFV/IVDict.datran $INFV/IVDict.dadata $INFV/IVDict.text )
#    /bin/ln -s "$FILE"
#end


#-------------------------------------------------------------------------------------
#                        無限語彙の仮名漢字変換へのリンク
#-------------------------------------------------------------------------------------

../bin/MakeTaskInDictDA.perl $STEP

#-------------------------------------------------------------------------------------
#                        仮名漢字変換
#-------------------------------------------------------------------------------------

( ../src/withtask < ../../../MMH-corpus/T.yomi > T.kkconv ) >& kkconv.log
../bin/Accuracy.perl T.kkconv ../../../MMH-corpus/T.text > T.accu


#-------------------------------------------------------------------------------------
#                        close
#-------------------------------------------------------------------------------------

echo Done $0
exit


#=====================================================================================
#                        END
#=====================================================================================
